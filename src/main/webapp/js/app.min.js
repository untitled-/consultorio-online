angular.module("main",["ui.bootstrap"]);var app=angular.module("main");$(function(){$(".sortable").sortable({revert:!0}),$(".draggable").draggable({revert:"invalid"}),$("ul, li").disableSelection()}),app.directive("sortable",function(){return{link:function(a,b,c){b.sortable({revert:!0,cursor:"move"})}}}),app.directive("navigation",function(){return{scope:{},controller:"navigationController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/navigation.html",link:function(a,b,c){}}}),app.controller("navigationController",["UserService",function(a){var b=this;b.user=a.getLoggedUser()}]),app.directive("idCard",function(){return{scope:{},controller:"idCardController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/identification.html",link:function(a,b,c){}}}),app.controller("idCardController",["PersonService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("idStatus",function(){return{scope:{},controller:"idStatusController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/status.html",link:function(a,b,c){}}}),app.controller("idStatusController",["PersonService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("idAppointments",function(){return{scope:{},controller:"idAppointmentsController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/appointments.html",link:function(a,b,c){}}}),app.controller("idAppointmentsController",["PersonService",function(a){var b=this;b.person=a.getPerson(),b.previousDiagnostic=b.person.appointments.previous.diagnostic;var c=function(){var a=new Date(b.person.appointments.next.date),c=new Date,d=new Date;d.setDate(c.getDate()+1),a.setHours(0,0,0,0)==c.setHours(0,0,0,0)?b.today=!0:a.setHours(0,0,0,0)==d.setHours(0,0,0,0)&&(b.tomorrow=!0)};c()}]),app.directive("medicalHistory",["$window",function(a){return{scope:{},controller:"medicalHistoryController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/medical-history.html",link:function(b,c,d){var e=angular.element(a);e.bind("resize",function(a){console.log(e.width()),768==e.width()})}}}]),app.controller("medicalHistoryController",["PersonService","$window",function(a,b){var c=this;c.person=a.getPerson(),c.medicalHistory=c.person.medicalHistory,c.status={alergies:!0};var d=angular.element(b);console.log(d.width()),d.width()<=768&&(c.mobile=!0),d.bind("resize",function(a){console.log(d.width()),d.width()<=768&&(c.mobile=!0)})}]),app.directive("familyHistory",function(){return{scope:{},controller:"familyHistoryController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/family-history.html",link:function(a,b,c){}}}),app.controller("familyHistoryController",["PersonService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("footer",function(){return{scope:{},controller:"footerController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/footer.html",link:function(a,b,c){}}}),app.controller("footerController",["UserService",function(a){var b=this;b.user=a.getLoggedUser()}]);var app=angular.module("main");app.service("PersonService",function(){return{getPerson:function(){return{name:"Jane",lastName:"Doe",dob:"19 de Junio, 1988",photoUrl:"images/face.jpg",status:"En tratamiento",appointments:{next:{date:new Date},previous:{date:new Date,diagnostic:{description:"Lorem ipsum",prescription:{number:"10000001",drugs:[{name:"Paracetamol",quantity:"3 pastillas"}]}}}},medicalHistory:{childhood:["Sarampión y bronquiectasias","Parotiditis","Rubéola"],medical:["Gastritis"],alergies:["Alergias inhalatorias","Alergias cutáneas","Alergias a fármacos"],quirugical:["Apendicitis"]}}}}}),app.service("UserService",function(){return{getLoggedUser:function(){return{name:"Pedro",lastName:"Marquez"}}}});