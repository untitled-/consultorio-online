var app=angular.module("main",["config-module","ui.bootstrap","formly","formlyBootstrap","ui.router"]);app.config(function(a,b){b.otherwise("/"),a.state("home",{url:"/",templateUrl:"html/home.html"}).state("patients",{url:"/patient",template:"<h2>Patient list</h2><patient-list></patient-list>"}).state("newPatient",{url:"/patient/create",template:"<patient-form></patient-form>"}).state("patientDetail",{url:"/patient/detail",templateUrl:"html/patientDetail.html"})}),app.controller("MainCtrl",function(){var a=this;a.user={},a.userFields=[{key:"email",type:"input",templateOptions:{type:"email",label:"Email address",placeholder:"Enter email"}},{key:"password",type:"input",templateOptions:{type:"password",label:"Password",placeholder:"Password"}},{key:"checked",type:"checkbox",templateOptions:{label:"Check me out"}}]});var app=angular.module("main");$(function(){$(".sortable").sortable({revert:!0}),$(".draggable").draggable({revert:"invalid"}),$("ul, li").disableSelection()}),app.directive("sortable",function(){return{link:function(a,b,c){b.sortable({revert:!0,cursor:"move"})}}}),app.directive("navigation",function(){return{scope:{},controller:"navigationController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/navigation.html",link:function(a,b,c){}}}),app.controller("navigationController",["UserService",function(a){var b=this;b.user=a.getLoggedUser()}]),app.directive("idCard",function(){return{scope:{},controller:"idCardController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/identification.html",link:function(a,b,c){}}}),app.controller("idCardController",["PatientService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("idStatus",function(){return{scope:{},controller:"idStatusController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/status.html",link:function(a,b,c){}}}),app.controller("idStatusController",["PatientService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("idAppointments",function(){return{scope:{},controller:"idAppointmentsController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/appointments.html",link:function(a,b,c){}}}),app.controller("idAppointmentsController",["PatientService",function(a){var b=this;b.person=a.getPerson(),b.previousDiagnostic=b.person.appointments.previous.diagnostic;var c=function(){var a=new Date(b.person.appointments.next.date),c=new Date,d=new Date;d.setDate(c.getDate()+1),a.setHours(0,0,0,0)==c.setHours(0,0,0,0)?b.today=!0:a.setHours(0,0,0,0)==d.setHours(0,0,0,0)&&(b.tomorrow=!0)};c()}]),app.directive("medicalHistory",["$window",function(a){return{scope:{},controller:"medicalHistoryController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/medical-history.html",link:function(b,c,d){var e=angular.element(a);e.bind("resize",function(a){console.log(e.width()),768==e.width()})}}}]),app.controller("medicalHistoryController",["PatientService","$window",function(a,b){var c=this;c.person=a.getPerson(),c.medicalHistory=c.person.medicalHistory,c.status={alergies:!0};var d=angular.element(b);console.log(d.width()),d.width()<=768&&(c.mobile=!0),d.bind("resize",function(a){console.log(d.width()),d.width()<=768&&(c.mobile=!0)})}]),app.directive("familyHistory",function(){return{scope:{},controller:"familyHistoryController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/family-history.html",link:function(a,b,c){}}}),app.controller("familyHistoryController",["PatientService",function(a){var b=this;b.person=a.getPerson()}]),app.directive("footer",function(){return{scope:{},controller:"footerController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/footer.html",link:function(a,b,c){}}}),app.controller("footerController",["UserService",function(a){var b=this;b.user=a.getLoggedUser()}]),app.directive("patientList",function(){return{scope:{},controller:"patientController",controllerAs:"ctrl",bindToController:!0,templateUrl:"html/directives/patientList.html",link:function(a,b,c){}}}).controller("patientController",["PatientService",function(a){var b=this;responsePromise=a.getPromiseAllPatients(),responsePromise.success(function(a,c,d,e){b.users=a}),responsePromise.error(function(a,b,c,d){alert("AJAX failed!")})}]),app.directive("patientForm",function(){return{scope:{},controller:"patientFormController",controllerAs:"ctrl",bindToController:!0,template:'<hr><formly-form model="ctrl.user" fields="ctrl.patientFields"  form="ctrl.patientForm"><button type="submit" class="btn btn-default" ng-click="ctrl.submit(ctrl.user)" ng-disabled="ctrl.patientForm.$invalid || ctrl.patientForm.$pristine">Submit</button></formly-form>',link:function(a,b,c){}}}).controller("patientFormController",["PatientService",function(a){var b=this;b.patientFields=[{className:"display-flex",fieldGroup:[{className:"flex-1",type:"input",key:"firstName",templateOptions:{label:"First Name",required:!0},validation:{messages:{}}},{className:"flex-1",type:"input",key:"middleName",templateOptions:{label:"Middle Name"}},{className:"flex-1",type:"input",key:"lastName",templateOptions:{label:"Last Name"}},{className:"flex-1",key:"gender",type:"select",templateOptions:{label:"Gender",options:[{name:"Male",value:"MALE"},{name:"Female",value:"FEMALE"}]}},{className:"flex-1",key:"bloodType",type:"select",templateOptions:{label:"Blood Type",options:[{name:"A+",value:"A_POSITIVE"},{name:"A-",value:"A_NEGATIVE"},{name:"B+",value:"B_POSITIVE"},{name:"B-",value:"B_NEGATIVE"},{name:"AB+",value:"AB_POSITIVE"},{name:"AB-",value:"AB_NEGATIVE"},{name:"O+",value:"O_POSITIVE"},{name:"O-",value:"O_NEGATIVE"}]}}]},{template:"<hr /><div><strong>Address:</strong></div>"},{className:"display-flex",fieldGroup:[{className:"flex-2",type:"input",key:"street",templateOptions:{label:"Street"}},{className:"flex-1",type:"input",key:"cityName",templateOptions:{label:"City"}},{className:"flex-1",type:"input",key:"zip",templateOptions:{type:"number",label:"Zip",max:99999,min:0,pattern:"\\d{5}"}}]},{template:"<hr />"},{type:"input",key:"otherInput",templateOptions:{label:"Other Input"}},{type:"checkbox",key:"otherToo",templateOptions:{label:"Other Checkbox"}}],b.submit=function(a){console.log(a)}}]);var app=angular.module("main");app.service("PatientService",["$http","restApi",function(a,b){return{getPromiseAllPatients:function(c,d){var e=a.get(b.getPatients);return e},getPerson:function(){return{name:"Jane",lastName:"Doe",dob:"19 de Junio, 1988",photoUrl:"images/face.jpg",status:"En tratamiento",appointments:{next:{date:new Date},previous:{date:new Date,diagnostic:{description:"Lorem ipsum",prescription:{number:"10000001",drugs:[{name:"Paracetamol",quantity:"3 pastillas"}]}}}},medicalHistory:{childhood:["Sarampión y bronquiectasias","Parotiditis","Rubéola"],medical:["Gastritis"],alergies:["Alergias inhalatorias","Alergias cutáneas","Alergias a fármacos"],quirugical:["Apendicitis"]}}}}}]),app.service("UserService",function(){return{getLoggedUser:function(){return{name:"Pedro",lastName:"Marquez"}}}});